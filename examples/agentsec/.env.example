# =============================================================================
# Environment Variables for agentsec Examples
# =============================================================================
# Copy this file to .env and fill in your values.
# WARNING: Never commit .env to version control!
#
# Each section indicates which examples require those variables.
# =============================================================================

# =============================================================================
# CORE SETTINGS - Required for: ALL agentsec examples
# =============================================================================
# Choose integration mode for LLM and MCP independently:
#   api     = Use Cisco AI Defense API for inspection (default)
#   gateway = Route calls through Cisco AI Defense Gateway

AGENTSEC_LLM_INTEGRATION_MODE=api
AGENTSEC_MCP_INTEGRATION_MODE=api

# Log level: DEBUG | INFO | WARNING | ERROR
AGENTSEC_LOG_LEVEL=INFO

# =============================================================================
# AI DEFENSE API MODE - Required for: All examples when AGENTSEC_*_INTEGRATION_MODE=api
# =============================================================================
# Inspection modes: off | monitor | enforce
#   off     = No inspection
#   monitor = Inspect & log, never block
#   enforce = Inspect & block policy violations

# LLM inspection
AI_DEFENSE_API_MODE_LLM_ENDPOINT=https://preview.api.inspect.aidefense.aiteam.cisco.com/api
AI_DEFENSE_API_MODE_LLM_API_KEY=your-ai-defense-api-key
AGENTSEC_API_MODE_LLM=enforce
AGENTSEC_API_MODE_FAIL_OPEN_LLM=false

# MCP tool inspection (for examples using MCP tools)
AI_DEFENSE_API_MODE_MCP_ENDPOINT=https://preview.api.inspect.aidefense.aiteam.cisco.com/api
AI_DEFENSE_API_MODE_MCP_API_KEY=your-mcp-api-key
AGENTSEC_API_MODE_MCP=enforce
AGENTSEC_API_MODE_FAIL_OPEN_MCP=false

# =============================================================================
# AI DEFENSE GATEWAY MODE - Required for: All examples when AGENTSEC_*_INTEGRATION_MODE=gateway
# =============================================================================
# Gateway modes: off | on
#   off = Do not route through gateway (bypass)
#   on  = Route through gateway (gateway handles enforcement)

AGENTSEC_GATEWAY_MODE_LLM=on
AGENTSEC_GATEWAY_MODE_MCP=on
AGENTSEC_GATEWAY_MODE_FAIL_OPEN_LLM=false
AGENTSEC_GATEWAY_MODE_FAIL_OPEN_MCP=false

# -----------------------------------------------------------------------------
# OpenAI Gateway - Required for: Gateway mode + OpenAI provider
# -----------------------------------------------------------------------------
AGENTSEC_OPENAI_GATEWAY_URL=https://gateway.preview.aidefense.aiteam.cisco.com/your-tenant/connections/your-openai-conn
AGENTSEC_OPENAI_GATEWAY_API_KEY=your-openai-gateway-key

# -----------------------------------------------------------------------------
# Azure OpenAI Gateway - Required for: Gateway mode + Azure OpenAI provider
# -----------------------------------------------------------------------------
AGENTSEC_AZURE_OPENAI_GATEWAY_URL=https://gateway.preview.aidefense.aiteam.cisco.com/your-tenant/connections/your-azure-conn
AGENTSEC_AZURE_OPENAI_GATEWAY_API_KEY=your-azure-openai-gateway-key

# -----------------------------------------------------------------------------
# Vertex AI Gateway - Required for: Gateway mode + Vertex AI provider
# -----------------------------------------------------------------------------
AGENTSEC_VERTEXAI_GATEWAY_URL=https://gateway.preview.aidefense.aiteam.cisco.com/your-tenant/connections/your-vertexai-conn
# Note: Vertex AI gateway uses ADC OAuth2 token (no static API key needed)

# -----------------------------------------------------------------------------
# AWS Bedrock Gateway - Required for: Gateway mode + Bedrock provider
# -----------------------------------------------------------------------------
AGENTSEC_BEDROCK_GATEWAY_URL=https://gateway.preview.aidefense.aiteam.cisco.com/your-tenant/connections/your-bedrock-conn
# Note: Bedrock gateway uses AWS Sig V4 auth (no API key needed)

# -----------------------------------------------------------------------------
# MCP Gateway - Required for: Gateway mode + MCP tools
# -----------------------------------------------------------------------------
AGENTSEC_MCP_GATEWAY_URL=https://gateway.agent.preview.aidefense.aiteam.cisco.com/mcp/tenant/your-tenant/connections/your-connection/server/your-server
AGENTSEC_MCP_GATEWAY_API_KEY=your-mcp-gateway-api-key

# =============================================================================
# OPENAI - Required for: 1-simple/openai_example.py, 2-agent-frameworks/* (--openai)
# =============================================================================
OPENAI_API_ENDPOINT=https://api.openai.com/v1
OPENAI_API_KEY=sk-your-openai-api-key

# =============================================================================
# AZURE OPENAI - Required for: 2-agent-frameworks/* (--azure), 3-agent-runtimes/microsoft-foundry/*
# =============================================================================
# Get these from Azure Portal > Your Azure OpenAI Resource > Keys and Endpoint
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-key
# Deployment name must match your Azure OpenAI resource deployment (not the model name like "gpt-4o")
# Find this: Azure Portal > Azure OpenAI > Your Resource > Model Deployments
AZURE_OPENAI_DEPLOYMENT_NAME=your-deployment-name
AZURE_OPENAI_API_VERSION=2024-08-01-preview

# =============================================================================
# AWS BEDROCK - Required for: 1-simple/simple_strands_bedrock.py, 2-agent-frameworks/* (--bedrock), 3-agent-runtimes/amazon-bedrock-agentcore/*
# =============================================================================
# Choose ONE auth method: profile | session_token
AWS_AUTH_METHOD=profile
AWS_REGION=us-east-1

# For profile auth method
AWS_PROFILE=default

# For session_token auth method (uncomment if needed)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_SESSION_TOKEN=

# =============================================================================
# GCP VERTEX AI - Required for: 2-agent-frameworks/* (--vertex), 3-agent-runtimes/gcp-vertex-ai-agent-engine/*
# =============================================================================
# Auth: Run `gcloud auth application-default login` or set GOOGLE_APPLICATION_CREDENTIALS
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
GOOGLE_CLOUD_LOCATION=us-central1
GOOGLE_AI_SDK=vertexai  # vertexai | google_genai

# =============================================================================
# MCP SERVER - Required for: 1-simple/mcp_example.py, examples using MCP tools
# =============================================================================
MCP_SERVER_URL=https://remote.mcpservers.org/fetch/mcp
MCP_TIMEOUT=60

# =============================================================================
# AZURE AI FOUNDRY DEPLOYMENT - Required for: 3-agent-runtimes/microsoft-foundry/* (deploy only)
# =============================================================================
# These are only needed when deploying to Azure AI Foundry (not for local testing)

# Azure Authentication (optional - can use `az login` instead)
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=

# Azure Resources
AZURE_SUBSCRIPTION_ID=
AZURE_RESOURCE_GROUP=

# Azure AI Foundry Project
AZURE_AI_FOUNDRY_PROJECT=
AZURE_AI_FOUNDRY_ENDPOINT=

# Azure Container Registry (for container deployments)
AZURE_ACR_NAME=
AZURE_ACR_LOGIN_SERVER=

# Azure Functions (for serverless deployments)
AZURE_FUNCTION_APP_NAME=
AZURE_STORAGE_ACCOUNT=

# =============================================================================
# GCP DEPLOYMENT - Required for: 3-agent-runtimes/gcp-vertex-ai-agent-engine/* (deploy only)
# =============================================================================
# GKE Master Authorized Networks (required by Cisco security guardrails)
# Get your IP: curl ifconfig.me
GKE_AUTHORIZED_NETWORKS=YOUR_PUBLIC_IP/32

# =============================================================================
# ADVANCED - Optional settings for fine-tuning
# =============================================================================
# Rules to enable for LLM inspection (comma-separated or JSON array)
AGENTSEC_LLM_RULES=jailbreak,prompt_injection

# Entity types to filter for (comma-separated)
# Available types: EMAIL, PHONE_NUMBER, SSN, CREDIT_CARD, IP_ADDRESS, etc.
# Leave empty to use default entity types from the AI Defense API
#AGENTSEC_LLM_ENTITY_TYPES=EMAIL,PHONE_NUMBER,SSN,CREDIT_CARD

# =============================================================================
# METADATA CONFIGURATION - Optional default metadata for all inspection requests
# =============================================================================
# Default user identifier for inspection metadata
#AGENTSEC_USER=

# Default source application name for inspection metadata
#AGENTSEC_SRC_APP=

# Default client transaction ID for inspection metadata (for correlation/audit)
#AGENTSEC_CLIENT_TRANSACTION_ID=

# =============================================================================
# RETRY CONFIGURATION - Optional settings for inspection API resilience
# =============================================================================
# Total number of retry attempts (default: 1 = no retry)
#AGENTSEC_RETRY_TOTAL=1

# Exponential backoff factor in seconds (default: 0 = no backoff)
# Actual delay: backoff_factor * (2 ^ attempt_number), capped at 30s
#AGENTSEC_RETRY_BACKOFF_FACTOR=0

# HTTP status codes to retry on (comma-separated, default: 500,502,503,504)
#AGENTSEC_RETRY_STATUS_FORCELIST=500,502,503,504

# =============================================================================
# CONNECTION POOL CONFIGURATION - Optional settings for HTTP connection pooling
# =============================================================================
# Maximum number of connections in the pool (default: 100)
#AGENTSEC_POOL_MAX_CONNECTIONS=100

# Maximum number of keepalive connections (default: 20)
#AGENTSEC_POOL_MAX_KEEPALIVE=20

# Timeout for inspection API calls in seconds (default: 1)
#AGENTSEC_TIMEOUT=1

# =============================================================================
# LOGGING CONFIGURATION - Optional settings for logging
# =============================================================================
# Log level: DEBUG | INFO | WARNING | ERROR (default: WARNING)
#AGENTSEC_LOG_LEVEL=WARNING

# Log format: text | json (default: text)
#AGENTSEC_LOG_FORMAT=text

# Optional log file path (default: none, logs to stderr only)
#AGENTSEC_LOG_FILE=

# Whether to redact sensitive data in logs (default: true)
#AGENTSEC_REDACT_LOGS=true
